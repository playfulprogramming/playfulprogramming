---
{
title: "Simplifying Angular testbed setup by converting to synchronous test hooks",
published: "2021-10-30T22:10:01Z",
edited: "2021-11-01T21:01:20Z",
tags: ["angular", "testing"],
description: "Surprising to some, calling TestBed.compileComponents is unnecessary unless you're Google. ",
originalLink: "https://dev.to/this-is-angular/simplifying-angular-testbed-setup-by-converting-to-synchronous-test-hooks-19cl",
coverImage: "cover-image.png",
socialImage: "social-image.png",
collection: "15016",
order: 1
}
---


When we use Angular's schematics to generate components, unnecessary asynchronous code is added to the test setup hook for its test suite.

The following test setup is generated by Angular's `component` generation schematic:

```ts
beforeEach(async () => {
  await TestBed.configureTestingModule({
    declarations: [MyComponent],
  }).compileComponents();
});
```
<figcaption>Angular testbed setup generated by the <code>component</code> schematic.</figcaption>

Alternatively, we might be using Angular's `waitForAsync` test function wrapper (formerly named `async`) as seen in the following code snippet:

```ts
beforeEach(waitForAsync(() => {
  TestBed.configureTestingModule({
    declarations: [MyComponent],
  }).compileComponents();
}));
```
<figcaption>Angular testbed setup using <code>waitForAsync</code>.</figcaption>

Here's the deal: It's only necessary to call the static `TestBed.compileComponents` method if we're not using the Angular CLI to run our tests (who would do such a thing, Google? ðŸ‘ˆðŸ˜).

The Angular CLI compiles our application and tests before the tests are run so no asynchronous action is needed for setting up the declarables.

Let's simplify the common test setup by leaving out async-await, `waitForAsync`, and even the `TestBed.compileComponents` invocation as seen in this code snippet:

```ts
beforeEach(() => {
  TestBed.configureTestingModule({
    declarations: [MyComponent],
  });
});
```
<figcaption>Simplified Angular testbed setup.</figcaption>

The following points are true for common Angular testbed setup for tests covering all types of Angular declarables:
- No need to use async-await
- No need to use `waitForAsync` (formerly named `async`)
- No need to call `TestBed.compileComponents`

Of course, there might be other reasons for introducing asynchronicity to our test setup but compiling and linking declarables is not one of them.

Enjoy a little less boilerplate in your Angular tests ðŸŒž